{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import api from\"../services/api\";import Tarefa from\"./Tarefa\";import FormularioTarefa from\"./FormularioTarefa\";import Modal from\"react-modal\";import{DragDropContext,Droppable}from\"@hello-pangea/dnd\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const modalStyles={content:{top:\"50%\",left:\"50%\",right:\"auto\",bottom:\"auto\",marginRight:\"-50%\",transform:\"translate(-50%, -50%)\",padding:\"30px\",borderRadius:\"12px\",backgroundColor:\"#f9f9f9\",boxShadow:\"0 4px 12px rgba(0, 0, 0, 0.1)\",maxWidth:\"500px\",width:\"90%\"}};Modal.setAppElement(\"#root\");const ListaTarefas=()=>{const[tarefas,setTarefas]=useState([]);const[editando,setEditando]=useState(null);const[modalIsOpen,setModalIsOpen]=useState(false);useEffect(()=>{fetchTarefas();},[]);const fetchTarefas=async()=>{try{const response=await api.get(\"/tarefas\");setTarefas(response.data);}catch(error){console.error(\"Erro ao buscar tarefas\",error);}};const handleDelete=async id=>{try{await api.delete(`/tarefas/${id}`);setTarefas(prevTarefas=>prevTarefas.filter(tarefa=>tarefa.id!==id));// Atualiza a lista localmente\n}catch(error){console.error(\"Erro ao excluir tarefa\",error);}};const onDragEnd=async result=>{if(!result.destination)return;const itens=Array.from(tarefas);const[reordenado]=itens.splice(result.source.index,1);itens.splice(result.destination.index,0,reordenado);setTarefas(itens);try{await api.patch(\"/tarefas/reordenar\",{ordem:itens.map(tarefa=>tarefa.id)});}catch(error){console.error(\"Erro ao reordenar tarefas\",error);}};const openModal=()=>{setEditando({});setModalIsOpen(true);};const closeModal=()=>{setEditando(null);setModalIsOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:\"20px\",color:\"#333\"},children:\"Lista de Tarefas\"}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:onDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"tarefas\",children:provided=>/*#__PURE__*/_jsxs(\"div\",{...provided.droppableProps,ref:provided.innerRef,children:[tarefas.map((tarefa,index)=>/*#__PURE__*/_jsx(Tarefa,{tarefa:tarefa,index:index,onEdit:()=>{setEditando(tarefa);setModalIsOpen(true);},onDelete:()=>handleDelete(tarefa.id)},tarefa.id)),provided.placeholder]})})}),/*#__PURE__*/_jsx(\"button\",{onClick:openModal,style:{marginTop:\"20px\",padding:\"10px 20px\",backgroundColor:\"#4CAF50\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",fontSize:\"16px\",cursor:\"pointer\",transition:\"background-color 0.3s ease\"},onMouseOver:e=>e.target.style.backgroundColor=\"#45a049\",onMouseOut:e=>e.target.style.backgroundColor=\"#4CAF50\",children:\"Incluir\"}),/*#__PURE__*/_jsx(Modal,{isOpen:modalIsOpen,onRequestClose:closeModal,style:modalStyles,contentLabel:\"Incluir/Editar Tarefa\",children:/*#__PURE__*/_jsx(FormularioTarefa,{tarefa:editando,onClose:()=>{closeModal();fetchTarefas();}})})]});};export default ListaTarefas;","map":{"version":3,"names":["React","useEffect","useState","api","Tarefa","FormularioTarefa","Modal","DragDropContext","Droppable","jsx","_jsx","jsxs","_jsxs","modalStyles","content","top","left","right","bottom","marginRight","transform","padding","borderRadius","backgroundColor","boxShadow","maxWidth","width","setAppElement","ListaTarefas","tarefas","setTarefas","editando","setEditando","modalIsOpen","setModalIsOpen","fetchTarefas","response","get","data","error","console","handleDelete","id","delete","prevTarefas","filter","tarefa","onDragEnd","result","destination","itens","Array","from","reordenado","splice","source","index","patch","ordem","map","openModal","closeModal","style","textAlign","children","marginBottom","color","droppableId","provided","droppableProps","ref","innerRef","onEdit","onDelete","placeholder","onClick","marginTop","border","fontSize","cursor","transition","onMouseOver","e","target","onMouseOut","isOpen","onRequestClose","contentLabel","onClose"],"sources":["C:/Users/eduar/lista-de-tarefas/frontend/src/components/ListaTarefas.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport api from \"../services/api\";\r\nimport Tarefa from \"./Tarefa\";\r\nimport FormularioTarefa from \"./FormularioTarefa\";\r\nimport Modal from \"react-modal\";\r\n\r\nimport { DragDropContext, Droppable } from \"@hello-pangea/dnd\";\r\n\r\nconst modalStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    padding: \"30px\",\r\n    borderRadius: \"12px\",\r\n    backgroundColor: \"#f9f9f9\",\r\n    boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.1)\",\r\n    maxWidth: \"500px\",\r\n    width: \"90%\",\r\n  },\r\n};\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nconst ListaTarefas = () => {\r\n  const [tarefas, setTarefas] = useState([]);\r\n  const [editando, setEditando] = useState(null);\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchTarefas();\r\n  }, []);\r\n\r\n  const fetchTarefas = async () => {\r\n    try {\r\n      const response = await api.get(\"/tarefas\");\r\n      setTarefas(response.data);\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar tarefas\", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await api.delete(`/tarefas/${id}`);\r\n      setTarefas((prevTarefas) =>\r\n        prevTarefas.filter((tarefa) => tarefa.id !== id)\r\n      ); // Atualiza a lista localmente\r\n    } catch (error) {\r\n      console.error(\"Erro ao excluir tarefa\", error);\r\n    }\r\n  };\r\n\r\n  const onDragEnd = async (result) => {\r\n    if (!result.destination) return;\r\n\r\n    const itens = Array.from(tarefas);\r\n    const [reordenado] = itens.splice(result.source.index, 1);\r\n    itens.splice(result.destination.index, 0, reordenado);\r\n\r\n    setTarefas(itens);\r\n\r\n    try {\r\n      await api.patch(\"/tarefas/reordenar\", {\r\n        ordem: itens.map((tarefa) => tarefa.id),\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Erro ao reordenar tarefas\", error);\r\n    }\r\n  };\r\n\r\n  const openModal = () => {\r\n    setEditando({});\r\n    setModalIsOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setEditando(null);\r\n    setModalIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\", textAlign: \"center\" }}>\r\n      <h1 style={{ marginBottom: \"20px\", color: \"#333\" }}>Lista de Tarefas</h1>\r\n\r\n      <DragDropContext onDragEnd={onDragEnd}>\r\n        <Droppable droppableId=\"tarefas\">\r\n          {(provided) => (\r\n            <div {...provided.droppableProps} ref={provided.innerRef}>\r\n              {tarefas.map((tarefa, index) => (\r\n                <Tarefa\r\n                  key={tarefa.id}\r\n                  tarefa={tarefa}\r\n                  index={index}\r\n                  onEdit={() => {\r\n                    setEditando(tarefa);\r\n                    setModalIsOpen(true);\r\n                  }}\r\n                  onDelete={() => handleDelete(tarefa.id)}\r\n                />\r\n              ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n\r\n      <button\r\n        onClick={openModal}\r\n        style={{\r\n          marginTop: \"20px\",\r\n          padding: \"10px 20px\",\r\n          backgroundColor: \"#4CAF50\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: \"5px\",\r\n          fontSize: \"16px\",\r\n          cursor: \"pointer\",\r\n          transition: \"background-color 0.3s ease\",\r\n        }}\r\n        onMouseOver={(e) => (e.target.style.backgroundColor = \"#45a049\")}\r\n        onMouseOut={(e) => (e.target.style.backgroundColor = \"#4CAF50\")}\r\n      >\r\n        Incluir\r\n      </button>\r\n\r\n      {/* Modal */}\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={closeModal}\r\n        style={modalStyles}\r\n        contentLabel=\"Incluir/Editar Tarefa\"\r\n      >\r\n        <FormularioTarefa\r\n          tarefa={editando}\r\n          onClose={() => {\r\n            closeModal();\r\n            fetchTarefas();\r\n          }}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListaTarefas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}